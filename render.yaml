# Render Blueprint â€” deploy with one click
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: sw-portal
    runtime: docker
    dockerfilePath: ./Dockerfile
    plan: starter  # $7/month, always-on
    region: frankfurt  # Closest to Greece
    healthCheckPath: /api/health
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: sw-portal-db
          property: connectionString
      - key: FLASK_ENV
        value: production
      - key: SECRET_KEY
        generateValue: true
      - key: JWT_SECRET_KEY
        generateValue: true
      - key: OPENAI_API_KEY
        sync: false  # Must be set manually in Render dashboard
      - key: FRONTEND_DIR
        value: /app/frontend/dist

databases:
  - name: sw-portal-db
    plan: starter  # $7/month, 1GB storage
    region: frankfurt
    databaseName: sw_portal
    user: sw_portal
    postgresMajorVersion: "16"
    ipAllowList: []  # Only internal access
